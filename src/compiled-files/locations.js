(function(){var e,o,r,n,t,a,u,s,i,y,l,m,c,h;m="",t=function(){},a={name:function(){return user.name=m,displayToPlayer("Let us begin, "+user.name+"!"),h()},town:function(){switch(m.toUpperCase()){case"WORK":return n();case"FIX":return displayToPlayer("Fixing your rod will cost you "+user.rod+" money. Are you sure?"),t=a.fix;case user.inventory.length>=1&&"SELL":return displayToPlayer("your items are: "+user.inventory.join(", ")+". Sell?"),t=a.sell;case user.inventory.length<1&&"SELL":return displayToPlayer("You have no items in your inventory.."),setTimeout(function(){return h()},1800);case"STATS":return showme();case"BEACH":return o();case user.lvl>=2&&"FOREST":return displayToPlayer("We are on our way to the enchanted forest......."),setTimeout(function(){return i()},1500);case user.lvl>=3&&"CAVE":return displayToPlayer("We are on our way to the cave......."),setTimeout(function(){return r()},1500);case"SAFE":return displayToPlayer("Store your money or recover it?"),t=a.safe;default:return displayToPlayer("Thats not an option")}},fix:function(){switch(m.toUpperCase()){case"YES":return user.money>=user.rod?(user.money-=user.rod,user.rod=0,displayToPlayer("You have "+user.money+" money and "+user.rod+" dmg!"),setTimeout(function(){return h()},2e3)):(displayToPlayer("Not enough money"),setTimeout(function(){return h()},2e3));case"NO":return h()}},sell:function(){return user.money+=2.5*user.inventory.length,user.inventory.length=0,displayToPlayer("You have sold all your items. Your money is "+user.money+"."),setTimeout(function(){return h()},2e3)},safe:function(){switch(m.toUpperCase()){case"STORE":return user.money>=1?(user.safe+=user.money,user.money=0,displayToPlayer("You stored all your money in the safe"),setTimeout(function(){return h()},1500)):(displayToPlayer("You have no money!"),setTimeout(function(){return h()},1500));case"RECOVER":return user.safe>=1?(user.money+=user.safe,user.safe=0,displayToPlayer("You recovered all your money from the safe"),setTimeout(function(){return h()},1500)):(displayToPlayer("There is nothing in the safe!"),setTimeout(function(){return h()},1500))}},beach:function(){switch(m.toUpperCase()){case"FISH":return user.rod<=15?(displayToPlayer("You go to fish!"),setTimeout(function(){return u()},1500)):(displayToPlayer(user.rod+"dmg"),o());case"SWIM":return displayToPlayer("You go swimming.."),setTimeout(c(),1500);case"LEAVE":return displayToPlayer("going to town"),setTimeout(function(){return h()},1600)}},fishing:function(){switch(m.toUpperCase()){case"YES":return u();case"NO":return o()}},swimming:function(){switch(m.toUpperCase()){case"YES":return c();case"NO":return o()}},win:function(){return"YES"===m.toUpperCase()?h():displayToPlayer("Thank you for playing, "+user.name+"!")},forest:function(){switch(m.toUpperCase()){case"ARENA":return displayToPlayer("You head to the arena...."),setTimeout(function(){return e()},2200);case"SHOP":return displayToPlayer("You are greeted by a cartoonish goblin named floop-flop"),setTimeout(function(){return displayToPlayer("floop-flop: BUY SOMESTUFF yeS? OOWeeE ITS TOPNPOTCH FOREST WEAPONS AND ARMOR YEs")},2e3),setTimeout(function(){return s(),setTimeout(function(){return t()},10)},3200);case"HUNT":return displayToPlayer("You head to the hunting grounds..."),setTimeout(function(){return y()},1500);case"LEAVE":return displayToPlayer("You head to the town"),setTimeout(function(){return h()},1600)}},floop:function(){switch(displayToPlayer("Upgrade Armor for 20 money, Upgrade Weapon for 15, or leave."),m.toUpperCase()){case"ARMOR":return user.money>=20?(displayToPlayer("Your armor goes up by 1 point! You lose 20. Armor, weapon or leave?"),user.armor+=1,user.money-=20,check(),console.log("Money: "+user.money+". Armor: "+user.armor),t=a.floop):(displayToPlayer("Not enough money! Armor, weapon or leave?"),t=a.floop);case"WEAPON":return user.money>=15?(displayToPlayer("Your weapon goes up by 1 point! You lose 15 money. Armor, weapon or leave?"),user.weapon+=1,user.money-=15,check(),console.log("Money: "+user.money+". Weapon: "+user.weapon),t=a.floop):(displayToPlayer("Not enough money! Armor, weapon or leave?"),t=a.floop);case"LEAVE":return displayToPlayer("Floop: floop ya' lateR PARTNR'"),setTimeout(function(){return i()},2e3)}},arena:function(){var e,o;switch(m.toUpperCase()){case"YES":switch(o=100*Math.random()+1,!1){case!(o<=5):return confirm("THE MUTANT has entered the match!"),user.armor>=13&&user.weapon>=11?(confirm("You SLAYED THE MUTANT! +15xp, +50money"),1===e&&(confirm("The cave trembles and echoes are heard..."),e=0),user.xp+=15,user.money+=50,e=0,console.log("money: "+user.money+"+15xp"),check(),i()):(confirm("You were PWNED by the mutant and sent to the hospital! Get better equipment!"),user.money-=10,check(),console.log("Money: "+user.money),h());case!(o<=20):return confirm("SKELETRON has entered the match!"),user.armor>=10&&user.weapon>=7?(confirm("You PWNED SKELETRON and from his aqcuired +20money and +5xp"),user.xp+=5,user.money+=20,check(),i()):(confirm("SKELETRON SENT YOU RUNNING BACK HOME!Get better equipment!"),user.xp-=1,user.money-=5,check(),console.log("Money: "+user.money+" "+user.xp+"xp"),h());case!(o<=40):return confirm("INFECTED GLOB has entered the match!"),user.armor>=6&&user.weapon>=7?(confirm("You killed the INFECTED GLOB! Gained +10money and +4xp"),user.money+=10,user.xp+=4,check(),i()):(confirm("The Glob jaZZED you UP BACK to the hospital! -5money - Get better equipment!"),user.money-=5,check(),console.log("Money: "+user.money),h());case!(o<=60):return confirm("An imp joined the fight"),user.armor>=4&&user.weapon>=4?(confirm("You SMACKED the imp! +15 money +2xp"),user.money+=15,user.xp+=2,i()):(confirm("Daaaang that imp frigged you UP! Go back home!  -3money - Get better equipment!"),user.money-=3,check(),h());case!(o<=70):return confirm("Goblins joined the battle-!"),user.armor>=2&&user.weapon>=2?(confirm("You FLOOPED those goblins UP +15money +2xp"),user.money+=15,user.xp+=2,check(),i()):(confirm("Snap! Those goblins diddled you! Go back home! Get better equipment!"),user.money-=3,check(),h());case!(o<=100):return confirm("You fought a boot and won.. +5money"),user.money+=5,i()}break;case"NO":return displayToPlayer("You head back..."),setTimeout(function(){return i()},1600)}},cave:function(){switch(m.toUpperCase()){case"YES":return displayToPlayer("You go throught the doors, as they close behind you, you find yourself in a massive chamber with a large world-devourer infront of you!"),user.armor>=30&&user.weapon>=30?setTimeout(function(){return displayToPlayer("You slice the devourer in two. killing it instantly because of your massive strength. YOU WIN!"),key+=1,win()},1500):(displayToPlayer("The devourer expands his long putrid body out of the a massive hole in the wall, charging at you"),setTimeout(function(){return displayToPlayer("Attack or defend?"),t=a.devourer},1500));case"NO":return displayToPlayer("You run out of the cave and back to the town"),setTimeout(h,1500);default:return confirm("not an option. You are pushed out of the cave"),setTimeout(h,1500)}},devourer:function(){return user.armor>=19&&user.weapon>=10?"ATTACK"===m&&user.weapon>=12?(displayToPlayer("You destroy the devourer with one massive plasma blast. YOU WIN"),setTimeout(function(){return displayToPlayer("Thank you for playing "+user.name+"!"),win()},1500)):(displayToPlayer("You defend against the mighty creature - but as you do, it begins circling around you. As a final resort you unleash all of your power, killing you and the creature, curing the world of the the devourer. You win the ULTIMATE HERO ENDING"),$("#mainh").html(user.name+" the hero"),reset()):(displayToPlayer("You were too weak to defend yourself. The devourer eats you up in one large gulp. Game Over. Try getting better gear"),user.money-=30,check(),console.log(user.money),setTimeout(h,1500))}},i=function(){return displayToPlayer("There are three paths, one leads you to a shop, the other to an arena, and the last to hunting grounds. Which way to do you pick?"),t=a.forest},s=function(){return t=a.floop},e=function(){return displayToPlayer("You arrive at the 'Dome of Death'. Fight?"),t=a.arena},l=[{num:10,msg:"You hunted a unichord! It's going in your inventory.. Hunt again?",props:{inventory:"Unichord"}},{num:20,msg:"You hunted a goblin! He pays you to let him go. Hunt again?",props:{money:10}},{num:30,msg:"You hunted a shell-snake! It's going in your inventory.. Hunt again?",props:{inventory:"shell-snake"}},{num:40,msg:"You hunted a grizzlor bear! It's going into your inventory! Hunt again?",props:{inventory:"Grizzlor mama"}},{num:42,msg:"You hunted a.. Kairy?! Kairy shines up your armor and runs back into the bushes. +1armor - Hunt again?",props:{armor:1}},{num:50,msg:"You hunted a... boot? You throw it away. Hunt again?"},{num:55,msg:"You hunted a flying-butt! It's going in your inventory.. Hunt again?",props:{inventory:"flying ass"}},{num:65,msg:"You hunted an ordinary rabbit. It's going in your inventory.. Hunt again?",props:{inventory:"wabbit"}},{num:75,msg:"You hunted a pegavis! It's going in your inventory.. Hunt again?",props:{inventory:"Pegavis"}},{num:76,msg:"You hunted a bug... but it is not a bug, it is feature. Hunt again?",props:{inventory:"feature"}},{num:100,msg:"You've been raided by imps! -50 money. Try again?",props:{money:-50}}],y=function(){var e,o,r,n,t,a;for(a=Math.random()*l.slice(-1)[0].num,r=0,n=l.length;r<n;r++)if(o=l[r],a<=o.num){e=o;break}switch(m=prompt(e.msg).toUpperCase(),"props"in e&&("money"in(t=e.props)&&(user.money+=t.money),check(),"armor"in t&&(user.armor+=t.armor),"inventory"in t&&user.inventory.push(t.inventory)),m){case"YES":return y();case"NO":return displayToPlayer("Heading back..."),setTimeout(function(){return i()},1600);default:return displayToPlayer("Not an option"),setTimeout(function(){return i()},1600)}},r=function(){return 0===key?100*Math.random()+1<=20?(displayToPlayer("You are attacked by a spider-skeleton-dungeon-keeper at the entrance!"),user.armor>=16&&user.weapon>=12?setTimeout(function(){return displayToPlayer("You kill the spider-skeleton. Let's enter."),r()},1500):setTimeout(function(){return displayToPlayer("You were too weak to fight the spider-skeleton-dungeon-keeper. Get better equipment"),h()},1500)):(displayToPlayer("we have entered the cave."),setTimeout(function(){return displayToPlayer("it's dark, you cant see anything"),setTimeout(function(){return displayToPlayer("Flames ignite besides you down a long corridor that lead towards two large doors. Enter?"),t=a.cave},1500)},1500)):(confirm("there is nothing here for you"),h())},o=function(){return displayToPlayer("We are at the beach. Fish, swim, or leave?"),t=a.beach},u=function(){var e;return user.rod<=15?(e=Math.floor(Math.random()*fishes.length+1))>=fishes.length?(displayToPlayer("You were attacked by a sea glob fish! You lost 10 money and now have +3 rod damage. Try again?"),user.rod+=3,user.money-=10,check(),t=a.fishing):(displayToPlayer(user.name+" caught a "+fishes[e]+"! It's going in your inventory. Try again?"),user.inventory.push(fishes[e]),t=a.fishing):(displayToPlayer("Your rod has "+user.rod+" damage! Go fix it at the town!"),setTimeout(function(){return o()},1500))},c=function(){var e;return(e=Math.floor(Math.random()*swimmingOutcomes.length+1))>=swimmingOutcomes.length?(displayToPlayer(user.name+" was stung by a deadly jelly fish! You lost half of your money at the town hospital"),user.money/=2,setTimeout(function(){return h()},3e3)):(displayToPlayer(swimmingOutcomes[e][0]+". Dive in again?"),user.money+=swimmingOutcomes[e][1],check(),swimmingOutcomes[e][2]&&setTimeout(function(){return user.inventory.push(swimmingOutcomes[e][2]),displayToPlayer("Added "+swimmingOutcomes[e][2]+" to inventory")},1500),setTimeout(function(){return t=a.swimming},3200))},h=function(){switch(!1){case!(user.lvl>=3):displayToPlayer("=TOWN= Work, fix, sell, safe, beach, forest, cave =TOWN=");break;case 2!==user.lvl:displayToPlayer("=TOWN= Work, fix, sell, safe, beach, forest =TOWN=");break;default:displayToPlayer("=TOWN= Work, fix, sell, safe, beach =TOWN=")}return t=a.town},n=function(){var e;switch(e=10*Math.random()+1,!1){case!(e<=2):return displayToPlayer("You go to the library and help out with storing while you've gained experience from reading. Also you get paid"),user.money+=25,user.xp+=1,console.log("You have "+user.xp+"xp! Money: "+user.money),check(),setTimeout(function(){return h()},2500);case!(e>=8):return displayToPlayer("While looking for a job you get robbed. You lose 10 money!"),user.money-=10,check(),console.log("Money: "+user.money),setTimeout(function(){return h()},2500);case!(e<=4):return displayToPlayer("You work at the pub and get paid 15 money!"),user.money+=15,console.log("Money:  "+user.money),setTimeout(function(){return h()},2500);case!(e<=7):return displayToPlayer("You go to the local car wash and gain some experience!"),user.xp+=1,console.log("You have "+user.xp+"xp!"),check(),setTimeout(function(){return h()},2500);default:return displayToPlayer("No one wants to hire you! Tough luck."),setTimeout(function(){return h()},2500)}}}).call(this);