var check,createUser,delay,fishes,game,mario,moneygainFX,question,start,swimmingOutcomes,u,win;game={queue:[],current:0,nextOn:!1,next:function(){return game.nextOn=!0,game.current>=game.queue.length?(game.nextOn=!1,game.queue=[],game.current=0):game.queue[game.current++](game.next)},action:function(act){return this.queue.push(act),this.nextOn||this.next(),this}},delay=function(c){return function(n){return setTimeout(n,c)}},$(function(){return $(".sound").click(function(){var el;return(el=$(this)).hasClass("off")?mario.play():mario.pause(),el.toggleClass("off")}),start()}),u={name:"",lvl:1,xp:0,inventory:[],money:0,safe:0,rod:0,armor:0,weapon:0,key:1},window.user=null,start=function(){if("undefined"!=typeof Storage)return $("#controls,#commies,#display").show(),$(".button").hide(),"player"in localStorage?(u=JSON.parse(localStorage.player),createUser(),townchoose(),updatestats()):(createUser(),displayToPlayer("What is your name?"),window.current=currents.name);displayToPlayer("This browser does not support local storage")},createUser=function(){return window.user=new Proxy(u,{set:function(t,p,v){return t[p]=v,updatestats()}})},question="",window.current=function(){},mario=new Audio("../static/locust.mp3"),moneygainFX=new Audio("../static/money-gain.mp3"),mario.looped=!0,fishes=["Guppy","SnakeFish","DragonFish","Boot","Tuna","GoldFish","Guaba","Man-eating snail","Goblin shark"],swimmingOutcomes=[["Dived and came out with sand..",0],["Dived in and found a sack of coins!",30],["Dived in and found a gold ring! It's going in your inventory",0,"Gold ring"],["Dived in and found a boot, It's useless",0],["Dived in and found a small sack of coins!",10],["Dived in and came out with nothing",0],["Dived in and came out with a large sack of coins!",45],["Dived in and came out with a book.",0,"Book"]],win=function(){return $("#mainh").html(user.name),user.armor=123,user.weapon=98,user.lvl=50,user.xp=0,user.money+=500,user.rod=-100,showme(),displayToPlayer("You are the strongest hero go back to town?"),currents.win},check=function(){if(user.xp>=10)switch(user.lvl+=1,confirm("You have leveled up to level "+user.lvl+"!"),user.xp-=10,user.lvl){case 2:alert("You can now go to the forest");break;case 3:alert("You can now venture into the cave... At your own risk...")}if(user.money<0)return user.money=0};